<div class="row">
  <div class="col-xs-12">
    <h3 class="pull-left" style="margin-top: 11px; margin-left: 1em;">{% trans num_results=results["as:totalItems"] %}{{ num_results }} documenten{%endtrans%}</h3>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-filters">
      {%trans%}Filters{%endtrans%}
    </button>
  </div>
</div>
{% if results.facets %}
<div class="row">
  <div class="col-xs-12 col-sm-6 col-md-4">
    <button
      class="btn-email"
      data-toggle="modal"
      data-target="#form-email-subscribe"
      {% if query %}
      data-form-email-subscribe-query="{{ query }}"
      data-form-email-subscribe-user-query="{{ query }}"
      {% elif results.facets.topics.buckets |length > 0  %}
      data-form-email-subscribe-query="{{ results.facets.topics.buckets.0.key.split()[0] |lower }}"
      data-form-email-subscribe-user-query="{{ results.facets.topics.buckets.0.key.split()[0] |lower }}"
      {% elif results.facets.location.buckets |length > 0 %}
      data-form-email-subscribe-query="{{ results.facets.location.buckets.0.key | lower }}"
      data-form-email-subscribe-user-query="{{ results.facets.location.buckets.0.key | lower }}"
      {% else %}
      data-form-email-subscribe-query="pgb"
      data-form-email-subscribe-user-query="pgb"
      {% endif %}
    >
    Krijg een email als er iets gepost wordt over
    {% if query %}
    {{ query }}
    {% elif results.facets.topics.buckets |length > 0 %}
    {{ results.facets.topics.buckets.0.key.split()[0] |lower }}
    {% elif results.facets.location.buckets |length > 0 %}
    {{ results.facets.location.buckets.0.key | lower }}
    {% else %}
    pgb
    {% endif %}
    </button>
  </div>
  <div class="col-xs-12 col-sm-6 col-md-4">
    <button
      class="btn-email"
      data-toggle="modal"
      data-target="#form-email-subscribe"
      data-form-email-subscribe-query="{% if query %}{{ query }}{% else %}*{% endif %}"
      data-form-email-subscribe-user-query="{% if query %}{{ query }}{% else %}*{% endif %}"
      {% if search_params.location %}
      data-form-email-subscribe-location="{{ search_params.location }}"
      {% elif results.facets.location.buckets |length > 0 %}
      data-form-email-subscribe-location="{{ results.facets.location.buckets.0.key | lower }}"
      {% else %}
      data-form-email-subscribe-location="{{ Amsterdam }}"
      {% endif %}
    >
    Krijg een email als er iets gepost wordt
    {% if query %}
    over {{ query }}
    {% endif %}
    {% if search_params.location %}
    in {{ search_params.location }}
    {% elif results.facets.location.buckets |length > 0 %}
    in {{ results.facets.location.buckets.0.key | lower }}
    {% else %}
    in Amsterdam
    {% endif %}
    </button>
  </div>
  <div class="col-xs-12 col-sm-6 col-md-4">
    <button
      class="btn-email"
      data-toggle="modal"
      data-target="#form-email-subscribe"
      data-form-email-subscribe-query="{% if query %}{{ query }}{% else %}*{% endif %}"
      data-form-email-subscribe-user-query="{% if query %}{{ query }}{% else %}*{% endif %}"
      {% if search_params.parties %}
      data-form-email-subscribe-parties="{{ search_params.parties }}"
      {% elif results.facets.parties.buckets |length > 0 %}
      data-form-email-subscribe-parties="{{ results.facets.parties.buckets.0.key | lower }}"
      {% else %}
      data-form-email-subscribe-parties="{{ VVD }}"
      {% endif %}
    >
    Krijg een email als er iets gepost wordt
    {% if query %}
    over {{ query }}
    {% endif %}
    en
    {% if search_params.parties %}
    {{ search_params.parties }}
    {% elif results.facets.parties.buckets |length > 0 %}
    {{ results.facets.parties.buckets.0.key | lower }}
    {% else %}
    VVD
    {% endif %}
    bevat
    </button>
  </div>
</div>
{% endif %}
{% for result in results['as:items'] %}
{% if loop.index % 2 == 1 %}
<div class="row">
{% endif %}
  <div class="col-xs-12 col-md-6">
  {% if result.object %}
    {% set result_object = result.object %}
  {% else %}
    {% set result_object = result %}
  {% endif %}
  {% include "inner_result.html" %}
  </div>
{% if loop.index % 2 == 0 %}
</div>
{% endif %}
{% endfor %}

{% if results.items %}

<nav id="pager" class="text-center">
  <ul class="pagination">
    {% if page <= 1 %}
    <li class="prev previous_page disabled">
      <a href="#" rel="prev">{%trans%}Previous{%endtrans%}</a>
    {% else %}
    <li class="prev previous_page">
      <a href="{{ dict(page=(page - 1)) |url_for_search_page(gov_slug) }}" rel="prev">{%trans%}Previous{%endtrans%}</a>
    {% endif %}
    </li>
    {% if page >= max_pages %}
    <li class="next next_page disabled">
      <a href="#" rel="next">{%trans%}Next{%endtrans%}</a>
    {% else %}
    <li class="next next_page">
      <a href="{{ dict(page=(page + 1)) |url_for_search_page(gov_slug) }}" rel="next">{%trans%}Next{%endtrans%}</a>
    {% endif %}
    </li>
  </ul>
</nav>
{% else %}
<div class="row">
  <div class="col-xs-12">
    <p>{%trans%}Unfortunately we were not able to find any documents matching your query.{%endtrans%}</p>
  </div>
</div>
{% endif %}

<script type="text/javascript">
"use strict";

{% if results['as:items'] %}
let articleObjects = {{ results['as:items'] |tojson|safe }};
{% endif %}
</script>

<p>{{ locations }}</p>
