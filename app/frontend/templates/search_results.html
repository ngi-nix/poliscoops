{% extends 'base.html' %}


{% block content %}

{% include 'search.html' %}
<section id="data">

<div class="wrapper">
  <nav id="sidebar" class="hidden-xs">
        <div class="navbar-header visible-xs-block">
          <h2 class="pull-left" style="margin-top:11px;">Filters</h2>
          <button type="button" class="btn btn-info navbar-btn pull-right sidebar-collapse" style="color: white !important;">
            X
          </button>
        </div>
        {% for key, desc in facets %}
          {% if key in results.facets %}
            {% if results.facets[key].buckets|length > 0 %}
              <h2 id="facet-{{ key }}">{{ desc }}</h2>
              {% for bucket in results.facets[key].buckets %}
                  {% if loop.index == 11 %}
                  <button class="btn btn-primary btn-large toggle-hide-after" type="button" data-toggle="collapse" data-target="#collapse-{{ key }}" aria-expanded="false" aria-controls="collapse-{{ key }}">
                    Toon meer
                  </button>
                  <div class="collapse" id="collapse-{{ key }}">
                  {% endif %}
                <a class="btn btn-default btn-category {{ bucket |active_bucket(key) }}" href="{{ bucket |link_bucket(key) }}" role="button">
                  {% if bucket |active_bucket(key) == 'active' %}
                  <button type="button" class="close" aria-label="Close" style="float:left; margin-right: 10px; color: white !important;"><span aria-hidden="true">&times;</span></button>
                  {% endif %}
                  {{ bucket |format_bucket(key) }} ({{ bucket.doc_count}})
                </a>
              {% endfor %}
              {% if results.facets[key].buckets|length > 10 %}
                </div> <!-- collapse-{{ key }} -->
              {% endif %}
            {% endif %}
          {% endif %}
        {% endfor %}
  </nav>

  <div id="content-search-results">
    <div class="row">
      <div class="col-xs-12">
        {% include 'results_as_list.html' %}
      </div>
    </div>
  </div>
</div>
</section>
{% endblock %}
